<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Электрические схемы</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        .header {
            padding: 20px;
            text-align: center;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        .list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .list-item {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
        }
        .list-item:hover {
            background-color: #f0f0f0;
        }
        #content {
            padding: 20px;
            display: none; /* Сначала скрыт */
        }
        #back-button {
            margin-bottom: 10px;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Электрические схемы</h1>
    </div>
    <ul class="list" id="schemes-list">
        <!-- Список заголовков будет здесь -->
    </ul>
    <div id="content">
        <button id="back-button">Назад</button>
        <div id="file-content"></div>
    </div>

    <script>
        // Инициализация Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand(); // Раскрываем на все окно

        // Получаем элемент списка и контента
        const schemesList = document.getElementById('schemes-list');
        const contentDiv = document.getElementById('content');
        const fileContentDiv = document.getElementById('file-content');
        const backButton = document.getElementById('back-button');

        // Пример данных: массив объектов с названием и путем к файлу
        // В реальности этот список может загружаться с сервера
        const schemes = [
            { title: "Схема 1", file: "schemes/schema1.html" },
            { title: "Схема 2", file: "schemes/schema2.html" },
            { title: "Чертеж 1", file: "schemes/drawing1.png" },
            // ... другие файлы
        ];

        // Функция для отображения списка
        function renderList() {
            schemesList.innerHTML = '';
            schemes.forEach(scheme => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.textContent = scheme.title;
                li.addEventListener('click', () => showFile(scheme.file));
                schemesList.appendChild(li);
            });
        }

        // Функция для показа содержимого файла
        function showFile(filePath) {
            // Скрываем список, показываем контент
            schemesList.style.display = 'none';
            contentDiv.style.display = 'block';

            // Загружаем файл в fileContentDiv
            // Если это изображение, создаем img
            if (filePath.endsWith('.png') || filePath.endsWith('.jpg') || filePath.endsWith('.jpeg')) {
                fileContentDiv.innerHTML = `<img src="${filePath}" alt="Scheme" style="max-width:100%;">`;
            } else if (filePath.endsWith('.html')) {
                // Для HTML файлов используем iframe или загружаем содержимое через fetch
                // Вариант 1: iframe
                fileContentDiv.innerHTML = `<iframe src="${filePath}" width="100%" height="600px"></iframe>`;
                // Вариант 2: загрузить через fetch и вставить HTML (но могут быть проблемы с CSS и скриптами)
                // fetch(filePath)
                //   .then(response => response.text())
                //   .then(html => fileContentDiv.innerHTML = html);
            } else {
                fileContentDiv.innerHTML = `Формат файла не поддерживается для просмотра.`;
            }
        }

        // Обработчик кнопки "Назад"
        backButton.addEventListener('click', () => {
            contentDiv.style.display = 'none';
            schemesList.style.display = 'block';
            fileContentDiv.innerHTML = '';
        });

        // Инициализация
        renderList();
    </script>
</body>
</html>